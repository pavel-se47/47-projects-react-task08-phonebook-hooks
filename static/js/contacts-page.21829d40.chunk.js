"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[141],{2644:function(e,t,n){n.r(t),n.d(t,{default:function(){return Q}});var r=n(5671),a=n(3144),o=n(136),c=n(4104),s=n(2791),u=n(9434),i=n(1087),l=n(3008),f="MainNav_phonebookLink__UK1tz",d=n(184);function p(){var e=(0,u.v9)(l.Z.getIsAuthenticated);return(0,d.jsxs)("nav",{children:[(0,d.jsx)(i.OL,{to:"/",className:f,children:"Home"}),e&&(0,d.jsx)(i.OL,{to:"/contacts",className:f,children:"Contacts"})]})}var h=n(8166),m=n(5926),v="UserMenu_phonebookContainer__5QChS",b="UserMenu_userAvatar__2gK7Y",x="UserMenu_userName__mKDP5",g="UserMenu_button__C-Or6";function C(){var e=(0,u.I0)(),t=(0,u.v9)(l.Z.getUserName),n=(0,s.useCallback)((function(){return e(m.Z.logoutUser())}),[e]);return(0,d.jsxs)("div",{className:v,children:[(0,d.jsx)("img",{src:h,alt:"avatar",width:"32",className:b}),(0,d.jsxs)("span",{className:x,children:["Welcome, ",t]}),(0,d.jsx)("button",{className:g,type:"button",onClick:n,children:"LogOut"})]})}var _="AuthNav_phonebookLink__x-5vL",Z=function(){return(0,d.jsxs)("div",{children:[(0,d.jsx)(i.OL,{to:"/register",className:_,children:"Register"}),(0,d.jsx)(i.OL,{to:"/login",className:_,children:"LogIn"})]})},y="AppBar_phonebookHeader__120fJ";function j(){var e=(0,u.v9)(l.Z.getIsAuthenticated);return(0,d.jsxs)("header",{className:y,children:[(0,d.jsx)(p,{}),e?(0,d.jsx)(C,{}):(0,d.jsx)(Z,{})]})}var N=n(5861),k=n(7757),A=n.n(k),w=n(8245),L=n(3263);L.Z.defaults.baseURL="https://connections-api.herokuapp.com/";var z=function(){return function(){var e=(0,N.Z)(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(w.Z.fetchAllContactsRequest()),e.prev=1,e.next=4,L.Z.get("/contacts");case 4:n=e.sent,t(w.Z.fetchAllContactsSuccess(n.data)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(w.Z.fetchAllContactsError(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},E=function(e,t){return function(){var n=(0,N.Z)(A().mark((function n(r){var a;return A().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(w.Z.addContactRequest()),n.prev=1,n.next=4,L.Z.post("/contacts",{name:e,number:t});case 4:a=n.sent,r(w.Z.addContactSuccess(a.data)),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),r(w.Z.addContactError(n.t0.message));case 11:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}()},F=function(e){return function(){var t=(0,N.Z)(A().mark((function t(n){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(w.Z.deleteContactRequest()),t.prev=1,t.next=4,L.Z.delete("/contacts/".concat(e));case 4:n(w.Z.deleteContactSuccess(e)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),n(w.Z.deleteContactError(t.t0.message));case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()},O="PhonebookContacts_phonebookContacts__s9SN9",P="PhonebookContacts_title__F4zNS",S="PhonebookContacts_subtitle__uBOsR",q="PhonebookContacts_contactName__KxhBO",M="PhonebookContacts_border__Z05KF",R="PhonebookContacts_input__AWKxM",U="PhonebookContacts_label__n7ZI2",I="PhonebookContacts_button__PpsOP",K=n(3471);function B(){var e=(0,u.I0)(),t=(0,u.v9)(K.Z.getFilteredContacts),n=(0,u.v9)(K.Z.getFilter);return(0,d.jsxs)("div",{className:O,children:[(0,d.jsx)("p",{className:P,children:"My contacts"}),(0,d.jsxs)("div",{className:M,children:[(0,d.jsx)("label",{className:U,children:(0,d.jsx)("input",{type:"text",className:R,name:"filter",value:n,placeholder:"Enter name for search",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan",required:!0,onChange:function(t){return e(w.Z.filterContact(t.target.value))}})}),(0,d.jsx)("ul",{children:t.map((function(t){return(0,d.jsxs)("li",{className:q,children:[t.name,": ",t.number,(0,d.jsx)("button",{type:"button",className:I,onClick:function(){return n=t.id,e(F(n));var n},children:"Delete"})]},t.id)}))}),(0,d.jsxs)("p",{className:S,children:["Total contacts: ",t.length]})]})]})}var D=n(9439),T=n(5276),H=n(643);function J(){var e=(0,u.I0)(),t=(0,s.useState)(""),n=(0,D.Z)(t,2),r=n[0],a=n[1],o=(0,s.useState)(""),c=(0,D.Z)(o,2),i=c[0],l=c[1];(0,s.useEffect)((function(){e(z())}),[e]);var f=(0,u.v9)(K.Z.getAllContacts),p=(0,u.v9)(K.Z.getLoadingContacts),h=function(){a(""),l("")};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:T.Z.loading,children:p&&(0,d.jsx)(H.g4,{height:"80",width:"80",radius:"9",color:"skyblue",ariaLabel:"three-dots-loading",wrapperStyle:{},wrapperClassName:"",visible:!0})}),(0,d.jsx)("p",{className:T.Z.title,children:"Add new contact"}),(0,d.jsx)("form",{className:T.Z.phonebookForm,onSubmit:function(t){if(t.preventDefault(),f.find((function(e){return e.name.toLowerCase()===r.toLowerCase()||e.number===i})))return alert("Error! A contact with the same name/number already exists!");e(E(r,i)),h()},children:(0,d.jsxs)("div",{className:T.Z.border,children:[(0,d.jsx)("label",{className:T.Z.label,children:(0,d.jsx)("input",{type:"text",className:T.Z.input,name:"name",value:r,placeholder:"Enter Name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan",required:!0,onChange:function(e){a(e.currentTarget.value)}})}),(0,d.jsx)("label",{className:T.Z.label,children:(0,d.jsx)("input",{type:"tel",className:T.Z.input,name:"number",value:i,placeholder:"Enter Number",pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +",required:!0,onChange:function(e){l(e.currentTarget.value)}})}),(0,d.jsx)("button",{type:"submit",className:T.Z.button,children:"Add contact"})]})})]})}var W="ContactsPage_pb__PNH7C",$=function(e){(0,o.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:W,children:[(0,d.jsx)(j,{}),(0,d.jsx)(J,{}),(0,d.jsx)(B,{})]})})}}]),n}(s.Component),Q=$},3471:function(e,t,n){n.d(t,{Z:function(){return f}});var r="NOT_FOUND";var a=function(e,t){return e===t};function o(e,t){var n="object"===typeof t?t:{equalityCheck:t},o=n.equalityCheck,c=void 0===o?a:o,s=n.maxSize,u=void 0===s?1:s,i=n.resultEqualityCheck,l=function(e){return function(t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,a=0;a<r;a++)if(!e(t[a],n[a]))return!1;return!0}}(c),f=1===u?function(e){var t;return{get:function(n){return t&&e(t.key,n)?t.value:r},put:function(e,n){t={key:e,value:n}},getEntries:function(){return t?[t]:[]},clear:function(){t=void 0}}}(l):function(e,t){var n=[];function a(e){var a=n.findIndex((function(n){return t(e,n.key)}));if(a>-1){var o=n[a];return a>0&&(n.splice(a,1),n.unshift(o)),o.value}return r}return{get:a,put:function(t,o){a(t)===r&&(n.unshift({key:t,value:o}),n.length>e&&n.pop())},getEntries:function(){return n},clear:function(){n=[]}}}(u,l);function d(){var t=f.get(arguments);if(t===r){if(t=e.apply(null,arguments),i){var n=f.getEntries(),a=n.find((function(e){return i(e.value,t)}));a&&(t=a.value)}f.put(arguments,t)}return t}return d.clearCache=function(){return f.clear()},d}function c(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"===typeof e}))){var n=t.map((function(e){return"function"===typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+n+"]")}return t}function s(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var o,s=0,u={memoizeOptions:void 0},i=r.pop();if("object"===typeof i&&(u=i,i=r.pop()),"function"!==typeof i)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof i+"]");var l=u,f=l.memoizeOptions,d=void 0===f?n:f,p=Array.isArray(d)?d:[d],h=c(r),m=e.apply(void 0,[function(){return s++,i.apply(null,arguments)}].concat(p)),v=e((function(){for(var e=[],t=h.length,n=0;n<t;n++)e.push(h[n].apply(null,arguments));return o=m.apply(null,e)}));return Object.assign(v,{resultFunc:i,memoizedResultFunc:m,dependencies:h,lastResult:function(){return o},recomputations:function(){return s},resetRecomputations:function(){return s=0}}),v};return a}var u=s(o),i=function(e){return e.contacts.items},l=function(e){return e.contacts.filter},f={getAllContacts:i,getLoadingContacts:function(e){return e.contacts.load},getFilter:l,getFilteredContacts:u([i,l],(function(e,t){var n=t.toLowerCase();return e.filter((function(e){return e.name.toLowerCase().includes(n)}))}))}},8166:function(e,t,n){e.exports=n.p+"static/media/default-avatar.e44fc4e22a4ce55fbe43.png"}}]);
//# sourceMappingURL=contacts-page.21829d40.chunk.js.map